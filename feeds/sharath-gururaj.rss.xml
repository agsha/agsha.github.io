<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>A Pelican Blog</title><link>/</link><description></description><atom:link href="/feeds/sharath-gururaj.rss.xml" rel="self"></atom:link><lastBuildDate>Thu, 23 Jun 2016 00:30:00 +0000</lastBuildDate><item><title>A bangalore software engineer's first trip to Bali</title><link>/a-bangalore-software-engineers-first-trip-to-bali.html</link><description>&lt;p&gt;I have just returned from a 8 day trip to Bali. Here are some tips and info, fresh off my mind. These are points that I wish I knew before my trip to Bali, and the tips that I never came across online or on tripadvisor reviews.&lt;/p&gt;
&lt;h3&gt;Flight&lt;/h3&gt;
&lt;p&gt;If you're leaving from bangalore, then consider going first to kochi or chennai, and then going to Bali. It worked out cheaper for me. Flight from Blore to kochi was ~ INR 1000 and flight from kochi to Bali was ~ INR 15000. A direct flight from Blore to Bali was in comparison around INR 24000. An aside: airport food is annoyingly expensive and not good at all. Strongly recommend &lt;em&gt;packing&lt;/em&gt; enough food to last you till your destination --- including layovers. &lt;/p&gt;
&lt;p&gt;If you're travelling in Air Asia, beware! They're the stingiest aircraft I've ever flown in. They don't even offer water for free, even on international routes. Let alone food. Furthermore, &lt;strong&gt;check-in baggage is not free!&lt;/strong&gt; it cost me around 5000 Rupees extra for one piece of check-in luggage. Oh, yes. If you forget to call and pay for check-in baggage before hand, then the cost is &lt;em&gt;really&lt;/em&gt; exorbitant if you check-in at the airport counter.&lt;/p&gt;
&lt;h3&gt;Visa requirements for indians&lt;/h3&gt;
&lt;p&gt;This was the best part about the Bali trip. &lt;strong&gt;Bali has FREE visa-on-arrival for indians!&lt;/strong&gt; Furthermore, they asked almost NO documents. He simply took one look at my passport and stamped "visa approved for 6 months". Even the immigration wait line was non-existent. The whole immigration process took around 2 minutes. Very pleasant experience.&lt;/p&gt;
&lt;h3&gt;Currency conversion&lt;/h3&gt;
&lt;p&gt;Take USD to Bali, not INR. None of the banks I saw exchanged INR for IDR (Indonesian rupiah). On the other hand, literally every other street has 'money changing' shops which changes USD to IDR (And they are legit). I strongly recommend buying dollars. &lt;/p&gt;
&lt;p&gt;I also had my ICICI debit card that worked pretty seamlessly in Bali. I called up ICICI beforehand that I would be using it in Bali. The card was declined in a couple of shops but accepted at around 90% of the shops. I could also draw IDR from most ATMS. For transaction in shops, ICICI charges 3% + competitive currency conversion. For ATM cash withdrawal, ICICI charges INR 125 + 3% of money withdrawn. Most services in Bali don't accept cards. So whenever you can use the card, use it.&lt;/p&gt;
&lt;p&gt;Something that I did not do, but I should have is that I should have checked with ICICI what happens in the even I lose my debit card and am short of cash. &lt;/p&gt;
&lt;h3&gt;Getting around in Bali&lt;/h3&gt;
&lt;p&gt;Bali is a pretty small place. Most places are within an hour or two driving distance. Definitely get a rental motorbike in Bali. Its super convenient. They charge ~INR 300 per day of rental. Public transportation is almost non existant from what I saw. Although, legally, you need an international driving license to ride a motorbike, It is generally tolerated. Even when caught by the police, the fines are low. Around INR 500. I got caught by the police once: when I was driving on the
wrong direction of a one way. I paid around INR 500 as fine and the police dusted my bike seat and showed me the direction to my destination and helped me along the way. You can see firangs (obviously not Balinese) zipping along in bikes all over Bali. &lt;/p&gt;
&lt;h3&gt;Bargain hard&lt;/h3&gt;
&lt;p&gt;Every service in Bali is overpriced, and it is expected that you bargain. Usually you can get a 35% - 50% reduction in the quoted price. Balinese are very friendly (and sympathetic) towards indians as compared to firangs and it is possible to strike better deals than what firangs can manage. So don't be shy to ask for a discount. &lt;/p&gt;
&lt;h3&gt;Names and the caste system in Bali.&lt;/h3&gt;
&lt;p&gt;There are only four first names in Bali: Ketut, komang, wayan, Made (pronounced Madi). The way it works is:
Let &lt;code&gt;String[] A = {"Ketut", "komang", "wayan", "Made"}&lt;/code&gt; be a string array where the index is 0-based. i.e., &lt;code&gt;A[0]&lt;/code&gt; is &lt;code&gt;"ketut"&lt;/code&gt;. Now if you're the &lt;code&gt;x&lt;/code&gt; &lt;sup&gt;th&lt;/sup&gt; eldest son (where the eldest son is &lt;code&gt;1&lt;/code&gt;, and so on), then your first name is &lt;code&gt;A[(x-1)%4]&lt;/code&gt;. The last name of course is different. Curiously though, people always tell their first name (one of the four said names) when you ask them their name. &lt;/p&gt;
&lt;h3&gt;Telephone SIM card and 3G&lt;/h3&gt;
&lt;p&gt;The very first thing you should do when you land is Bali is: you should get a local SIM card with a 3G data limit of ~2GB.&lt;/p&gt;
&lt;p&gt;3G Coverage in Bali is excellent and google maps is your friend in Bali. Oh yeah. &lt;strong&gt;Definitely carry a extra battery pack (or power pack) for your cell phone&lt;/strong&gt;. Its a life saver. This was easily the most important thing I carried to Bali&lt;/p&gt;
&lt;h3&gt;Places to visit.&lt;/h3&gt;
&lt;p&gt;If this is your first time in Bali, then from an indian point of view, and depending on how long you're planning to visit, this is your order of priority for places to stay. &lt;/p&gt;
&lt;h4&gt;Seminyak&lt;/h4&gt;
&lt;p&gt;Total party area with nice beaches and shopping, also accessible to other places like Uluwatu temple in the south and Tanah lot in the north. (No trip to Bali is complete without a visit to these two). Catch the sunset in both places. Its breathtaking. I did explore three or four beaches but I didnt like most of them. For example, kuta beach doesnt have a lot of 'beach' area (The distances from where the waves end to where the roads begin). Sanur beach totally sucked. It has white sands but
its gravelly and rocky. Very uncomfortable. Beti-balug beach in seminyak has nice sand but not so popular and seems a little ghetto. The only one I liked was double-six beach. Its got everything. Beach chairs, soft sand, lots of restaurants nearby and tons of activities. Perfect for spending an entire day.&lt;/p&gt;
&lt;h4&gt;Ubud&lt;/h4&gt;
&lt;p&gt;Best place to stay is right next to monkey forest. Very cultural place and worth exploring the 'non-beachy' side of Bali. From there you can explore other areas in and near ubud, like tagalalong rice terrace, tegunnen water falls etc.&lt;/p&gt;
&lt;h4&gt;Nusa Penida&lt;/h4&gt;
&lt;p&gt;Little off the main touristy spot (its a separate island). I never visited it but I wish I had. Its got lots of stuff to do according to &lt;a href="https://indonesia.tripcanvas.co/bali/unique-places-in-bali/page/3/"&gt;this link&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Voltage specs in Bali&lt;/h3&gt;
&lt;p&gt;Bali uses the same kind of round pins that we use in india. Not the flat rectangular pins from US. But one major problem: The socket is "hollow" &lt;a href="https://www.tripadvisor.com/LocationPhotoDirectLink-g1465999-d1539040-i79297910-The_Wangsa_Private_Estate-Tanjung_Benoa_Nusa_Dua_Peninsula_Bali.html"&gt;like this&lt;/a&gt;. So if your charger body is bulky, it won't fit inside the hollowness of the sockets. None of my chargers from india fit in the socket. Luckily every airbnb that I stayed had a Bali adapter
or a Bali charger that allowed me to charge.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sharath Gururaj</dc:creator><pubDate>Thu, 23 Jun 2016 00:30:00 +0000</pubDate><guid>tag:,2016-06-23:a-bangalore-software-engineers-first-trip-to-bali.html</guid><category>misc</category></item><item><title>The affair between iostat and fio</title><link>/the-affair-between-iostat-and-fio.html</link><description>&lt;p&gt;In the following analysis, I'm going to assume you already know what &lt;code&gt;fio&lt;/code&gt; and &lt;code&gt;iostat&lt;/code&gt; is (I'm too lazy to write it down, and there are better articles out there). This post merely explains the relationship between the numbers&lt;/p&gt;
&lt;h3&gt;fio output&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;[sharath.g@prod-d42ar-osd-a-00050-409388 /home/sharath.g]$ sudo fio --name=global --bs=4k --ioengine=libaio --iodepth=1 --runtime=120 --time_based --size=3G --group_reporting --disable_lat=1 --disable_clat=1 --disable_slat=1 --clat_percentiles=0  --filename=/var/lib/ceph/osd/ceph-153/fio/my_journal  --name=regular_read --rw=randread
regular_read: (g=0): rw=randread, bs=4K-4K/4K-4K, ioengine=libaio, iodepth=1
2.0.8
Starting 1 process
Jobs: 1 (f=1): [r] [100.0% done] [1112K/0K /s] [278 /0  iops] [eta 00m:00s]
regular_read: (groupid=0, jobs=1): err= 0: pid=501549
  read : io=126112KB, bw=1050.1KB/s, iops=262 , runt=120001msec
    bw (KB/s)  : min=  785, max= 1338, per=100.00%, avg=1051.79, stdev=91.21
  cpu          : usr=0.19%, sys=0.96%, ctx=19643, majf=0, minf=21
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &amp;gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &amp;gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &amp;gt;=64=0.0%
     issued    : total=r=31528/w=0/d=0, short=r=0/w=0/d=0

Run status group 0 (all jobs):
   READ: io=126112KB, aggrb=1050KB/s, minb=1050KB/s, maxb=1050KB/s, mint=120001msec, maxt=120001msec

Disk stats (read/write):
  vdb: ios=19591/0, merge=0/0, ticks=118660/0, in_queue=118644, util=99.08%
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;iostat output&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;[sharath.g@prod-d42ar-osd-a-00050-409388 /home/sharath.g]$ iostat -x  -d 2 /dev/vdb
Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
vdb               0.00     0.00  165.00    0.00   660.00     0.00     8.00     0.99    6.02    6.02    0.00   6.02  99.40
&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sharath Gururaj</dc:creator><pubDate>Thu, 02 Jun 2016 16:20:00 +0000</pubDate><guid>tag:,2016-06-02:the-affair-between-iostat-and-fio.html</guid><category>misc</category></item><item><title>C IDE with vim, cscope and grep (ag)</title><link>/c-ide-with-vim-cscope-and-grep-ag.html</link><description>&lt;h1&gt;Setup Cscope&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;First, Install cscope. &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Next, you need a &lt;code&gt;cscope.files&lt;/code&gt; with all the files that need to be indexed. In the source folder, you can do that with  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;find `pwd` -name &amp;quot;*.c&amp;quot; -o -name &amp;quot;*.cc&amp;quot; -o -name &amp;quot;*.h&amp;quot; &amp;gt; cscope.files
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;the &lt;code&gt;pwd&lt;/code&gt; is needed instead of &lt;code&gt;.&lt;/code&gt; because you need &lt;code&gt;find&lt;/code&gt; to print absolute pathnames.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Now, build the cscope database.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;cscope -q -R -b -i cscope.files
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This command will build &lt;code&gt;cscope.out&lt;/code&gt;. &lt;code&gt;-q&lt;/code&gt; to build an efficient database, &lt;code&gt;-b&lt;/code&gt; to build just the database. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Start up vim and issue the command&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;:cs add ~/code/ceph/cscope.out
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which will add the cscope database. Vim has built in support for cscope in the form of the &lt;code&gt;:cs&lt;/code&gt; command. But it does &lt;em&gt;not&lt;/em&gt; have useful keybindings setup. For that, you need &lt;code&gt;cscopes_map.vim&lt;/code&gt; (which I've sourced in the &lt;code&gt;.vimrc&lt;/code&gt;). You're all set now. Some basic comands:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;C-\ s&lt;/code&gt; to find a symbol &lt;/li&gt;
&lt;li&gt;&lt;code&gt;C-\ c&lt;/code&gt; to find all callers&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C-\ f&lt;/code&gt; to find global definitions&lt;/li&gt;
&lt;li&gt;&lt;code&gt;:help cscope&lt;/code&gt; for more&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Setup ctags&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Install ctags.&lt;/li&gt;
&lt;li&gt;cd to the source folder and build the ctags index with &lt;code&gt;ctags -R .&lt;/code&gt; (&lt;code&gt;-R&lt;/code&gt; is for recursive).&lt;/li&gt;
&lt;li&gt;In vim, you need to do &lt;code&gt;:set tags=/path/to/tags&lt;/code&gt;. Unfortunately, you need to do this everytime you start vim. (how to avoid it?)&lt;/li&gt;
&lt;li&gt;use &lt;code&gt;C-]&lt;/code&gt; to show a list of tags under the cursor. &lt;code&gt;C-o&lt;/code&gt; or &lt;code&gt;C-t&lt;/code&gt; to go back.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Some Vim shortcuts I would like to remember:&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;[[&lt;/code&gt; moves to the previous curly brace on column 0 (1?) &lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl-O&lt;/code&gt; and &lt;code&gt;Ctrl-I&lt;/code&gt; last location before jump&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[{&lt;/code&gt; jump to begining of current block! (Or you can search backward for &lt;code&gt;{&lt;/code&gt;!&lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sharath Gururaj</dc:creator><pubDate>Mon, 02 May 2016 22:20:00 +0000</pubDate><guid>tag:,2016-05-02:c-ide-with-vim-cscope-and-grep-ag.html</guid><category>misc</category></item><item><title>http and https proxy with squid</title><link>/http-and-https-proxy-with-squid.html</link><description>&lt;h3&gt;On the client machine&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Find out the client subnet of the form &lt;code&gt;10.34.44.0/22&lt;/code&gt;. To do that, on the client machine, run &lt;code&gt;/sbin/ifconfig&lt;/code&gt; to find out the       ip address and subnet mask. with these two pieces of info, you can calculate the CIDR &lt;a href="http://www.subnet-calculator.com/cidr.php"&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;export variables: 
  &lt;code&gt;export http_proxy=http://client.ip.ad.ress:port/
  export https_proxy=http://client.ip.ad.ress:port/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Caveat&lt;/h3&gt;
&lt;p&gt;if you run sudo, make sure the variables are exported in root&lt;/p&gt;
&lt;h3&gt;On the proxy machine&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Install squid: &lt;code&gt;sudo apt-get install squid&lt;/code&gt;. &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;change /etc/squid/squid.conf to add these lines
   &lt;code&gt;acl wormhole src 10.34.44.0/22 # the client subnet who need the proxy
   http_access allow wormhole # wormhole is just a name
   icp_access allow wormhole&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;restart squid &lt;code&gt;sudo /etc/squid/squid.conf restart&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And thats it! &lt;code&gt;curl -L www.google.com&lt;/code&gt; (&lt;code&gt;-L&lt;/code&gt; to follow redirects) will work.&lt;/p&gt;
&lt;p&gt;I needed this for &lt;code&gt;pip&lt;/code&gt;. With my setup, I can do &lt;code&gt;sudo export &amp;lt;blah&amp;gt;;export&amp;lt;blah&amp;gt;;pip install &amp;lt;package&amp;gt;&lt;/code&gt;. &lt;/p&gt;
&lt;p&gt;FYI, my squid version is&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;[sharath.g@d42-a-0003 /home/sharath.g]$ dpkg -s squid
Package: squid
Status: install ok installed
Priority: optional
Section: web
Installed-Size: 1864
Maintainer: Luigi Gangitano &amp;lt;luigi@debian.org&amp;gt;
Architecture: amd64
Version: 2.7.STABLE9-4.1+deb7u1
Replaces: squid-novm
Depends: libc6 (&amp;gt;= 2.7), libcomerr2 (&amp;gt;= 1.01), libdb5.1, libgssapi-krb5-2 (&amp;gt;= 1.10+dfsg~), libkrb5-3 (&amp;gt;= 1.6.dfsg.2), libldap-2.4-2 (&amp;gt;= 2.4.7), libpam0g (&amp;gt;= 0.99.7.1), netbase, adduser, logrotate (&amp;gt;= 3.5.4-1), squid-common (&amp;gt;= 2.7.STABLE9-4.1+deb7u1), lsb-base (&amp;gt;= 3.2-14), perl-modules
Pre-Depends: debconf (&amp;gt;= 1.2.9) | debconf-2.0
Suggests: squidclient, squid-cgi, logcheck-database, resolvconf (&amp;gt;= 0.40), smbclient, winbind
Conflicts: sarg (&amp;lt;&amp;lt; 1.1.1-2), squid-novm
Conffiles:
 /etc/init.d/squid 04af7c1f2d27c35db0200679fbc9bdbe
 /etc/logrotate.d/squid 0dd1fea0f842a58f538408754e747311
 /etc/resolvconf/update-libc.d/squid f8d0ffa84ddd982f32da05cb61bc479e
Description: Internet object cache (WWW proxy cache)
 This package provides the Squid Internet Object Cache developed by
 the National Laboratory for Applied Networking Research (NLANR) and
 Internet volunteers.
Homepage: http://www.squid-cache.org/
&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sharath Gururaj</dc:creator><pubDate>Wed, 02 Mar 2016 10:20:00 +0000</pubDate><guid>tag:,2016-03-02:http-and-https-proxy-with-squid.html</guid><category>regex</category></item><item><title>Regex recipes</title><link>/regex-recipes.html</link><description>&lt;p&gt;I find myself always having to google around a lot for common regex recipes. Surprisingly, the most common cases cannot be easily found without extensive grokking.&lt;/p&gt;
&lt;h3&gt;Python examples&lt;/h3&gt;
&lt;h4&gt;Common special characters:&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;\d&lt;/code&gt;: only digit, &lt;/p&gt;
&lt;p&gt;Search for occurences of a regex string and replace it with something that depends on the actual value of the string.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;
&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;r&amp;quot;(blue|red)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;())),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;blue socks and red shoes&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;output: &lt;code&gt;4 socks and 3 shoes&lt;/code&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sharath Gururaj</dc:creator><pubDate>Sun, 21 Feb 2016 10:20:00 +0000</pubDate><guid>tag:,2016-02-21:regex-recipes.html</guid><category>regex</category></item><item><title>Setting up a ceph cluster</title><link>/setting-up-a-ceph-cluster.html</link><description>&lt;p&gt;The instructions &lt;a href="http://docs.ceph.com/docs/hammer/install/manual-deployment/"&gt;here&lt;/a&gt; mostly work. Except that the &lt;code&gt;ceph.conf&lt;/code&gt; file  given there doesnt work. Because, when I issue &lt;code&gt;sudo /etc/init.d/ceph start mon.node1&lt;/code&gt; in the end, It expects a section in &lt;code&gt;ceph.   conf&lt;/code&gt; called &lt;code&gt;[mon.node1]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Furthermore, to launch a radosgw instance, you &lt;em&gt;need&lt;/em&gt; to have a section in your host file called &lt;code&gt;client.rgw.&amp;lt;some_name&amp;gt;&lt;/code&gt; and your  keyring should have a corresponding key section called  &lt;code&gt;client.rgw.&amp;lt;some_name&amp;gt;&lt;/code&gt; and you should have imported that key into ceph    via &lt;code&gt;sudo ceph auth import -i /etc/ceph/&amp;lt;keyring_file&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;All the three names must match: the one in ceph.conf, in the keyring and in &lt;code&gt;ceph auth list&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Oh, and yeah, do &lt;strong&gt;NOT&lt;/strong&gt; put a line like this in your &lt;code&gt;ceph.conf&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;rgw &lt;span class="nv"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /var/lib/ceph/radosgw/ceph-rgw.prod-d42sa-rgw-a-287004
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you do, you'l get weird messages like &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Couldn't init storage provider (RADOS)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;and you'll go crazy trying to debug it.&lt;/p&gt;
&lt;p&gt;So the working &lt;code&gt;ceph.conf&lt;/code&gt; with comments is: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;[&lt;/span&gt;global&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;fsid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; a7f64266-0894-4f1e-a635-d0aeaca0e993 &lt;span class="c1"&gt;#anything random, generated from uuidgen&lt;/span&gt;
auth cluster &lt;span class="nv"&gt;required&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; cephx
auth service &lt;span class="nv"&gt;required&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; cephx
auth client &lt;span class="nv"&gt;required&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; cephx
osd journal &lt;span class="nv"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 1024
filestore xattr use &lt;span class="nv"&gt;omap&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
osd pool default &lt;span class="nv"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt; 
osd pool default min &lt;span class="nv"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; 
osd pool default pg &lt;span class="nv"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;333&lt;/span&gt; 
osd pool default pgp &lt;span class="nv"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;333&lt;/span&gt; 
osd crush chooseleaf &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; 
&lt;span class="c1"&gt;# useful for debugging&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;mon&lt;span class="o"&gt;]&lt;/span&gt;
  debug &lt;span class="nv"&gt;mon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 20
&lt;span class="o"&gt;[&lt;/span&gt;osd&lt;span class="o"&gt;]&lt;/span&gt;
  debug &lt;span class="nv"&gt;osd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 20
&lt;span class="o"&gt;[&lt;/span&gt;rgw&lt;span class="o"&gt;]&lt;/span&gt;
  debug &lt;span class="nv"&gt;rgw&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;20
&lt;span class="o"&gt;[&lt;/span&gt;mon.node1&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# as many sections as monitors&lt;/span&gt;
  &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; dev-d42sharath1-mon-a-0001-389313 &lt;span class="c1"&gt;#This NEEDS to be the actual hostname donno for what reasons&lt;/span&gt;
  mon &lt;span class="nv"&gt;addr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10.33.29.199 &lt;span class="c1"&gt;# needs to be the actual address.&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;client.rgw.foo&lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="nv"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; dev-d42sharath1-rgw-a-0001-389309
    &lt;span class="nv"&gt;keyring&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /etc/ceph/ceph.client.rgw.keyring
    log &lt;span class="nv"&gt;file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /var/log/radosgw/client.radosgw.gateway.log
    rgw &lt;span class="nv"&gt;frontends&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; civetweb &lt;span class="nv"&gt;port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;80
    rgw print &lt;span class="k"&gt;continue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sharath Gururaj</dc:creator><pubDate>Sun, 07 Feb 2016 10:20:00 +0000</pubDate><guid>tag:,2016-02-07:setting-up-a-ceph-cluster.html</guid><category>ceph</category></item><item><title>I finally setup a blog</title><link>/i-finally-setup-a-blog.html</link><description>&lt;p&gt;&lt;strong&gt;I finally setup my own blog!&lt;/strong&gt; and i'm happy I did it the right way. No lame wordpress. I bought a virtual private server on &lt;a href="www.digitalocean.com"&gt;digital ocean&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;Virtual private server (or a droplet in digitalocean lingo) is a fancy name for your own computer in the cloud, which you can ssh into and have   root access. It cost me ~Re 300 per month for their most basic droplet. I set it up with a static ipv4.&lt;/p&gt;
&lt;p&gt;Since digitalocean has no DNS service, I bought a domain on &lt;a href="www.namecheap.com"&gt;namecheap&lt;/a&gt; for Re 500 per year and pointed it to the droplet. I   am hosting this as a static site powered by pelican. Using the built-in python server for now.  &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;UPDATE (11th may 2016):&lt;/strong&gt; Paying monthly to digital ocean was getting to be a pain. So I have moved to github pages, which is just as simple.  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sharath Gururaj</dc:creator><pubDate>Tue, 02 Feb 2016 22:20:00 +0000</pubDate><guid>tag:,2016-02-02:i-finally-setup-a-blog.html</guid><category>misc</category></item></channel></rss>